<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Space Bullet Hell</title>
</head>

<body>
    <canvas id="canvas" style="background:url('./Bildes/Backround.png'); margin: auto; display: block; height: 98vh; width: 65vh;"></canvas>

    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        canvas.width = window.innerWidth * 0.65;
        canvas.height = window.innerHeight * 0.98;

        var shipImg = new Image;
        shipImg.src = "./Bildes/Ship1.2.png";
        var shipWidth = 128;
        var shipHeight = 128;
        var ship_x = (canvas.width-shipWidth)/2;
        var ship_y = canvas.height-shipHeight;
        var ship_speed = 3;
        var ship_healthMAX = 10;
        var ship_healthCurrent = 10;
        var ship_side_speed = 0;
        var ship_shield = 0;
        var ship_damage = 0;
        var ship_bullet_speed = 0;

        var enemy1Img = new Image;
        enemy1Img.src = "./Bildes/Enemy/Enemy1.2.png"; 
        var enemy1Width = 250;
        var enemy1Height = 256;
        var enemy1_x = (canvas.width-enemy1Width)/2;
        var enemy1_y = 20;
        var enemy1_speed = 0;
        var enemy1_side_speed = 0;
        var enemy1health = 0;
        var enemy1_damage = 0;
        var enemy1_bullet_speed = 0;

        var PlayerBulletImg = new Image;
        PlayerBulletImg.src = "./Bildes/PlayerBullet.png";
        var IsPlayerShooting = 0;
        var  PlayerBullet_x = 0;
        var  PlayerBullet_y = 0;

        // var enemyImg = new Image;
        // enemyImg.src = ""; 
        // var enemyWidth = 0;
        // var enemyHeight = 0;
        // var enemy_x = 0;
        // var enemy_y = 0;
        // var enemy_speed = 0;
        // var enemy_side_speed = 0;
        // var enemy_health = 0;
        // var enemy_damage = 0;
        // var enemy_bullet_speed = 0;

        // var score = 123456;
        // var time_remaining = 300;


        // function restart_game() {
        //     time_remaining = 300;
        //     score = 0;
        // }





        // raimja mēģinājumi 
            //full hp
            var HealthBar = new Image;
            HealthBar.src = "./Bildes/HeartFull.png";

            //empty hp   
            var EmptyHP = new Image;
            EmptyHP.src = "./Bildes/HeartEmpty.png";

        var HealthHeight = 30;
        var HealthWidth = 30;
        var Health_x = (canvas.width-HealthWidth)/2;
        var Health_y = canvas.height-HealthHeight;
            
        //padevos

    
        

        document.addEventListener("keydown", handleKeyDown);
        document.addEventListener("keyup", handleKeyUp);

        var keys = {}; 

        function handleKeyDown(event) {
            keys[event.key] = true;
        }

        function handleKeyUp(event) {
            keys[event.key] = false;
        }

        function update() {
            // Controls
            if (keys['w']) { // Move up
                ship_y -= ship_speed;
            }
            if (keys['s']) { // Move down
                ship_y += ship_speed;
            }
            if (keys['a']) { // Move left
                ship_x -= ship_speed;
            }
            if (keys['d']) { // Move right
                ship_x += ship_speed;
            }
            if (keys['space']) {// shoot 
                IsPlayerShooting = 1;
            }

            if (ship_x < -20) {     //Keeps ship within the x canvas boundaries
                ship_x = -20;
            } else if (ship_x > canvas.width - shipWidth + 20) {
                ship_x = canvas.width - shipWidth + 20;
            } if (ship_y < 0) {     //Keeps ship within the y canvas boundaries
                ship_y = 0;
            } else if (ship_y > canvas.height - shipHeight) {
                ship_y = canvas.height - shipHeight;
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            console.log("Canvas height: " + canvas.height)
            console.log("Canvas width: " + canvas.width)

            ctx.drawImage(shipImg, ship_x, ship_y);
            console.log("Ship height: " + shipImg.height)
            console.log("Ship width: " + shipImg.width)

            
            ctx.drawImage(enemy1Img, enemy1_x, enemy1_y);
            console.log("Enemy1 height: " + enemy1Img.height)
            console.log("Enemy1 width: " + enemy1Img.width)

            for(var i=0;i<ship_healthMAX;i++){
                ctx.drawImage(HealthBar, Health_x +(i*30), Health_y);
                console.log("HealthBar height: " + HealthHeight)
                console.log("HealthBar width: " + HealthWidth)
            }
            for(var j=ship_healthMAX;j>ship_healthCurrent;j--){
                ctx.drawImage(EmptyHP, Health_x +(j*30), Health_y);
                console.log("EmptyHP height: " + HealthHeight)
                console.log("EmptyHP width: " + HealthWidth)
            }
          

            if (IsPlayerShooting == 1) {
                ctx.drawImage(PlayerBulletImg, PlayerBullet_x, PlayerBullet_y);
            }

            //KAPĒC ŠITAS NESTRĀDĀAAAAAAAAAAAAAAAAA????????????????????????????????????????????????
            //JEBAL JAU
            
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();

    </script>
</body>
</html>