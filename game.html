<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Space Bullet Hell</title>
</head>

<body>

<canvas id="myCanvas" style="background:url('https://t3.ftcdn.net/jpg/02/64/27/90/360_F_264279006_WDXxV3OHjAOoHqH7iiLDrg23p0947g7U.jpg'); background-size: cover; height: 98vh; width: 65vh;"></canvas>

<script>
    var ctx = myCanvas.getContext("2d");

    var score = 123456;
    var FPS = 60; // How many frames per second
    var time_remaining = 20;

    var ship_x = 100;
    var ship_y = 200;
    var ShipImg = new Image(50, 50);
    ShipImg.src = "./Bildes/coin.png"; // The player
    var ship_speed = 0;
    var ship_health = 0;
    var ship_side_speed = 0;
    var ship_shield = 0;
    var ship_damage = 0;

    var enemy_x = 200;
    var enemy_y = 100;
    var EnemyImg = new Image(50, 50);
    EnemyImg.src = "./Bildes/ship.png"; // The enemy
    var enemy_speed = 3;
    var enemy_side_speed = 0;
    var enemy_health = 0;
    var enemy_damage = 0;

    function restart_game() {
        time_remaining = 300;
        score = 0;
    }

    function ImagesTouching(x1, y1, img1, x2, y2, img2) { // This function detects whether two images are touching - very useful function
        if (x1 >= x2 + img2.width || x1 + img1.width <= x2) return false; // too far to the side
        if (y1 >= y2 + img2.height || y1 + img1.height <= y2) return false; // too far above/below
        return true; // otherwise, overlap
    }

    function Do_a_Frame() {
        ctx.clearRect(0, 0, myCanvas.width, myCanvas.height);

        ctx.drawImage(ShipImg, ship_x, ship_y, ShipImg.width, ShipImg.height); //  draw ship

        ctx.fillStyle = "purple";
        ctx.font = "20px Arial";
        ctx.fillText("Score: " + score, 0, 20); // display the score

        ctx.drawImage(EnemyImg, enemy_x, enemy_y, EnemyImg.width, EnemyImg.height); // draw the enemy
        if (ImagesTouching(ship_x, ship_y, ShipImg, enemy_x, enemy_y, EnemyImg)) { // check for touching
            score = score - 1; // subtract one from score
            enemy_speed = enemy_speed + 0.5; // and make it fall a bit faster
            enemy_x = -EnemyImg.width; // hide the enemy so the score doesn't skyrocket
        }
    }

    function animate() {
        Do_a_Frame();
        requestAnimationFrame(animate);
    }

    animate();

    function MyKeyDownHandler(MyEvent) {
        if (MyEvent.keyCode == 37 && ship_x > 0) {
            ship_x = ship_x - 3;
        } // left
        if (MyEvent.keyCode == 39 && ship_x + ShipImg.width < myCanvas.width) {
            ship_x = ship_x + 3;
        } // right
        if (MyEvent.keyCode == 38 && ship_y > 0) {
            ship_y = ship_y - 3;
        } // up
        if (MyEvent.keyCode == 40 && ship_y + ShipImg.height < myCanvas.height) {
            ship_y = ship_y + 30;
        } // down
        if (MyEvent.keyCode == 82) restart_game(); // R to restart
        MyEvent.preventDefault();
    }

    addEventListener("keydown", MyKeyDownHandler); // listen for keystrokes

    myCanvas.width = window.innerWidth; // fill the entire browser width
    myCanvas.height = window.innerHeight; // fill the entire browser height

</script>

</body>
</html>